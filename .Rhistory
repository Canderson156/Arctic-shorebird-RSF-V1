ungroup()
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Species,
Survey_Lead,
Year,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
plot_species,
mean_birds_year)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Species,
Survey_Lead,
Year,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
plot_species,
total_birds)
group_by(plot_date)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Species,
Survey_Lead,
Year,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
plot_species,
total_birds) %>%
group_by(plot_date)
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Species,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
plot_species,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date)
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Species,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date)
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date) %>%
distinct()
View(prismg)
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct()
View(prismg)
n_unique(prismg$plot_year)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey))
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds))
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey))
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey)) %>%
ungroup()
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey)) %>%
ungroup() %>%
select(-plot_year, -sum_geese_survey) %>%
distinct()
View(prismg)
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey)) %>%
ungroup() %>%
select(-plot_year, -sum_geese_survey) %>%
distinct() %>%
group_by(Plot) %>%
mutate(mean_geese = mean(mean_geese_year)) %>%
ungroup() %>%
select(-plot_date, -mean_geese_year) %>%
distinct()
prismg <- prism %>%
filter(Species %in% geese) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey)) %>%
ungroup() %>%
select(-plot_year, -sum_geese_survey) %>%
distinct() %>%
group_by(Plot) %>%
mutate(mean_geese = mean(mean_geese_year)) %>%
ungroup() %>%
select(-mean_geese_year) %>%
distinct()
n_unique(prismg$Plot)
geese_sp <- c("CAGO", "SNGO", "ROGO", "CACG", "GWFG")
geese_plots <- prism %>%
filter(Species %in% geese_sp) %>%
select(Plot,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
Plot_Shape,
quality,
Selection_method,
Plot_area,
comparison,
Human_development_details,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey)) %>%
ungroup() %>%
select(-plot_year, -sum_geese_survey) %>%
distinct() %>%
group_by(Plot) %>%
mutate(mean_geese = mean(mean_geese_year)) %>%
ungroup() %>%
select(-mean_geese_year) %>%
distinct()
View(geese_plots)
geese_plots <- prism %>%
filter(Species %in% geese_sp) %>%
select(Plot,
plot_date,
plot_year,
total_birds) %>%
group_by(plot_date) %>%
mutate(sum_geese_survey = sum(total_birds)) %>%
ungroup() %>%
select(-plot_date, -total_birds) %>%
distinct() %>%
group_by(plot_year) %>%
mutate(mean_geese_year = mean(sum_geese_survey)) %>%
ungroup() %>%
select(-plot_year, -sum_geese_survey) %>%
distinct() %>%
group_by(Plot) %>%
mutate(mean_geese = round(mean(mean_geese_year))) %>%
ungroup() %>%
select(-mean_geese_year) %>%
distinct()
View(geese_plots)
SB <- sb %>%
ungroup() %>%
group_by(Plot) %>%
mutate(sum_shorebirds = sum(mean_birds_all)) %>%
select(Plot,
#Species,
Survey_Lead,
Region_name,
Region_code,
Sub_region_name,
Sub_region_code,
Plot_type,
Survey_method,
#Plot_Shape, # a few plots differ between years
#quality, # a few plots differ between years
Selection_method,
#Plot_area,
comparison,
#plot_species,
sum_shorebirds) %>%
distinct()
SB <- SB %>%
merge(allplots, all = TRUE) %>%
mutate(sum_shorebirds = ifelse(is.na(sum_shorebirds), 0, round(sum_shorebirds)))
SB <- SB %>%
merge(geese_plots, all = TRUE) %>%
mutate(mean_geese = ifelse(is.na(mean_geese), 0, mean_geese))
View(SB)
View(SB)
source('J:/Christine_temp/Arctic shorebird RSF/Version 2 - Manuscript/data cleaning scripts/01_library.R')
source('J:/Christine_temp/Arctic shorebird RSF/Version 2 - Manuscript/data cleaning scripts/02_prep_PRISM_data.R')
rm(geese_sp, geese_plots, sb)
View(SB)
SB <- rename(SB, zone = UTM_Zone)
SB1 <- SB %>%
gather(key = "corner", value = "coordinate", starts_with("UTM")) %>%
separate(corner, c("UTM", "corner", "axis"), c("_")) %>%
select(-UTM)
View(SB1)
?gather
SB1 <- SB %>%
gather(key = "corner", value = "coordinate", starts_with("UTM"))
View(SB1)
SB1 <- SB %>%
gather(key = "axis", value = "coordinate", starts_with("UTM"))
View(SB1)
?str_sub
SB1 <- SB %>%
gather(key = "axis", value = "coordinate", starts_with("UTM")) %>%
mutate(axis = str_sub(axis, 4))
View(SB1)
SB1 <- SB %>%
gather(key = "axis", value = "coordinate", starts_with("UTM")) %>%
mutate(axis = str_sub(axis, 5))
View(SB1)
View(SB)
